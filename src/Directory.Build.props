<Project>

    <Import Project="Version.props" />

    <PropertyGroup>
        <SnapNupkg Condition="$(SnapNupkg) == ''">false</SnapNupkg>
        <SnapBootstrap Condition="$(SnapBootstrap) == ''">false</SnapBootstrap>
    </PropertyGroup>

   <PropertyGroup>
        <OsPlatform Condition="$([MSBuild]::IsOsPlatform('Windows'))">Windows</OsPlatform>
        <OsPlatform Condition="'$(OsPlatform)' == '' AND !$([MSBuild]::IsOsPlatform('Windows'))">Unix</OsPlatform>
        <IsNetCoreApp Condition="$(TargetFramework.StartsWith('netcoreapp'))">true</IsNetCoreApp>
        <IsNetCoreApp Condition="'$(IsNetCoreApp)' == ''">false</IsNetCoreApp>
        <IsNetStandard Condition="$(TargetFramework.StartsWith('netstandard'))">true</IsNetStandard>
        <IsNetStandard Condition="'$(IsNetStandard)' == ''">false</IsNetStandard>
        <IsCIBuild Condition="$(SNAPX_CI_BUILD.ToUpper()) == 'TRUE' OR $(SNAPX_CI_BUILD) == '1'">true</IsCIBuild>
        <IsCIBuild Condition="$(IsCIBuild) == ''">false</IsCIBuild>
        <IsNetFullFramework Condition="'$(IsNetStandard)' == 'false' AND '$(IsNetCoreApp)' == 'false'">true</IsNetFullFramework>
        <IsNetFullFramework Condition="'$(IsNetFullFramework)' == ''">false</IsNetFullFramework>
        <SnapNativeConfiguration Condition="$(IsCIBuild)">Release</SnapNativeConfiguration>
        <SnapNativeConfiguration Condition="$(SnapNativeConfiguration) == ''">$(Configuration)</SnapNativeConfiguration>
        <!-- TODO: FIX ME WHEN VS 2019 IS RELEASED -->
        <!-- <SnapMsvsToolsetVersion Condition="$(SnapMsvsToolsetVersion) == ''">$(VisualStudioVersion.Substring(0, 2))</SnapMsvsToolsetVersion> -->
        <SnapMsvsToolsetVersion Condition="$(SnapMsvsToolsetVersion) == ''">16</SnapMsvsToolsetVersion> 
    </PropertyGroup>

    <PropertyGroup>
        <Authors>Peter Rekdal Sunde</Authors>
        <Product>Snap</Product>
        <Copyright>Copyright Â© Peter Rekdal Sunde</Copyright>
        <NeutralLanguage>en-US</NeutralLanguage>
        <PackageRequireLicenseAcceptance>false</PackageRequireLicenseAcceptance>
        <PackageLicenseUrl>https://opensource.org/licenses/MIT</PackageLicenseUrl>
        <PackageProjectUrl>https://github.com/peters/snapx</PackageProjectUrl>
        <RepositoryUrl>https://github.com/peters/snapx.git</RepositoryUrl>
        <PackageReleaseNotes>See $(PackageProjectUrl)/blob/master/CHANGELOG.md#v$(VersionPrefix.Replace('.','')) for release notes.</PackageReleaseNotes>
        <RepositoryType>git</RepositoryType>
        <IsPackable>false</IsPackable>
        <NoPackageAnalysis>true</NoPackageAnalysis>
        <PackageOutputPath Condition="$(PackageOutputPath) == '' AND $(IsCIBuild)">$(BUILD_ARTIFACTSTAGINGDIRECTORY)</PackageOutputPath>
        <PackageOutputPath Condition="$(PackageOutputPath) == ''">$(MSBuildThisFileDirectory)..\nupkgs</PackageOutputPath>
        <GeneratePackageOnBuild Condition="$(SnapNupkg)">true</GeneratePackageOnBuild>
        <GeneratePackageOnBuild Condition="$(GeneratePackageOnBuild) == ''">false</GeneratePackageOnBuild>
    </PropertyGroup>

    <PropertyGroup>
        <LangVersion>7.3</LangVersion>
    </PropertyGroup>

    <PropertyGroup Condition="$(SnapBootstrap)">
        <DefineConstants>$(DefineConstants);SNAP_BOOTSTRAP;</DefineConstants>
    </PropertyGroup>

    <PropertyGroup Condition="$(SnapNupkg)">
        <DefineConstants>$(DefineConstants);SNAP_NUPKG;</DefineConstants>
    </PropertyGroup>

    <PropertyGroup Condition="$(OsPlatform) == 'Windows'">
        <DefineConstants>$(DefineConstants);PLATFORM_WINDOWS;</DefineConstants>
    </PropertyGroup>

    <PropertyGroup Condition="$(OsPlatform) == 'Unix'">
        <DefineConstants>$(DefineConstants);PLATFORM_UNIX;</DefineConstants>
    </PropertyGroup>

    <PropertyGroup Condition="$(IsNetStandard)">
        <DefineConstants>$(DefineConstants);NETSTANDARD;</DefineConstants>
    </PropertyGroup>

    <PropertyGroup Condition="$(IsNetCoreApp)">
        <DefineConstants>$(DefineConstants);NETCOREAPP;</DefineConstants>
    </PropertyGroup>

    <PropertyGroup Condition="$(IsNetFullFramework)">
        <DefineConstants>$(DefineConstants);NETFULLFRAMEWORK;</DefineConstants>
    </PropertyGroup>

    <PropertyGroup Condition="$(IsCIBuild)">
        <DefineConstants>$(DefineConstants);CI_BUILD;</DefineConstants>
    </PropertyGroup>

</Project>
