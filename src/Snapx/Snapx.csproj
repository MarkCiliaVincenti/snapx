<Project Sdk="Microsoft.NET.Sdk">

    <Import Project="..\Snap\Snap.Deps.targets" />
    <Import Project="..\Snap.Installer\Snap.Installer.Deps.targets" />

    <PropertyGroup>
        <OutputType>Exe</OutputType>
        <RootNamespace>snapx</RootNamespace>
        <AssemblyName>snapx</AssemblyName>
        <PackageId>snapx</PackageId>
        <Description>Snapx is a powerful .NET cross-platform tool with built-in support for delta updates, release channels (test, staging, production etc.) and staged rollouts via nuget.</Description>
        <IsPackable>true</IsPackable>
        <IsTestProject>false</IsTestProject>
        <PackAsTool>true</PackAsTool>
        <ToolCommandName>snapx</ToolCommandName>
        <CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>
    </PropertyGroup>

    <ItemGroup>
        <Compile Remove="bin\**" />
        <Compile Remove="nupkgs\**" />
        <Compile Remove="obj\**" />
        <EmbeddedResource Remove="bin\**" />
        <EmbeddedResource Remove="nupkgs\**" />
        <EmbeddedResource Remove="obj\**" />
        <None Remove="bin\**" />
        <None Remove="nupkgs\**" />
        <None Remove="obj\**" />
    </ItemGroup>

    <ItemGroup>
        <PackageReference Include="CommandLineParser" Version="2.4.3" /> 
    </ItemGroup>

    <ItemGroup>
        <ProjectReference Include="..\Snap\Snap.csproj" />
        <ProjectReference Include="..\Snap.Installer\Snap.Installer.csproj" />
    </ItemGroup>

    <ItemGroup Condition="!$(SnapBootstrap)">
        <EmbeddedResource Include="../../build/dotnet/win-x64/Snap.Installer/netcoreapp2.2/Release/publish/Setup-win-x64.zip" Link="Resources/Setup/Setup-win-x64.zip" />
        <EmbeddedResource Include="../../build/dotnet/linux-x64/Snap.Installer/netcoreapp2.2/Release/publish/Setup-linux-x64.zip" Link="Resources/Setup/Setup-linux-x64.zip" />
        <EmbeddedResource Include="../../tools/warp-packer-win-x64.exe" Link="Resources/Tools/warp-packer-win-x64.exe" />
        <EmbeddedResource Include="../../tools/warp-packer-linux-x64.exe" Link="Resources/Tools/warp-packer-linux-x64.exe" />
    </ItemGroup>
    
</Project>
